import { getLanguage } from './settingsStorage'

const dict = {
  es: {
    menu: {
      dashboard: 'Dashboard',
      analytics: 'Analíticas',
      transactions: 'Transacciones',
      reports: 'Reportes',
      settings: 'Configuración',
      main: 'Menú Principal',
      general: 'General',
    },
    dashboard: {
      title: 'Dashboard',
      subtitle: 'Resumen de tus gastos y estadísticas',
      balanceTotal: 'Balance Total',
      gastosMes: 'Gastos Este Mes',
      promedioDiario: 'Promedio Diario',
      totalGastos: 'Total Gastos',
      vsMesAnterior: 'vs mes anterior',
      ultimos30: 'últimos 30 días',
      registrado: 'registrados',
      monthlyLimit: 'Límite de Gasto Mensual',
      used: 'usado',
      limitExceeded: '¡Límite superado!',
      closeToLimit: 'Cerca del límite',
      timeline: 'Gastos en el Tiempo',
      byCategory: 'Gastos por Categoría',
      categories: 'Categorías',
      loading: 'Cargando dashboard...'
    },
    analytics: {
      title: 'Analíticas',
      subtitle: 'Análisis detallado de tus gastos',
      trendGeneral: 'Tendencia General',
      vsPeriodoAnterior: 'vs periodo anterior',
      categoriaPrincipal: 'Categoría Principal',
      masFrecuente: 'más frecuente',
      gastoTotal: 'Gasto Total',
      ultimosNDias: (n) => `últimos ${n} días`,
      tendenciaTemporal: 'Tendencia Temporal',
      distribucionCategoria: 'Distribución por Categoría',
      analisisCategoria: 'Análisis por Categoría',
      resumenPeriodo: 'Resumen del Periodo',
      totalGastado: 'Total Gastado',
      promedioDiario: 'Promedio Diario',
      diasConGastos: 'Días con Gastos',
      categoriasActivas: 'Categorías Activas',
      loading: 'Cargando analytics...'
    },
    components: {
      itemSingular: 'gasto',
      itemPlural: 'gastos'
    },
    reports: {
      title: 'Reportes',
      subtitle: 'Genera y descarga reportes detallados',
      exportar: 'Exportar Reportes',
      reportePdf: 'Reporte PDF',
      pdfDesc: 'Descarga un reporte completo en PDF',
      excel: 'Excel',
      excelDesc: 'Exporta datos a formato Excel',
      csv: 'CSV',
      csvDesc: 'Exporta datos en formato CSV',
      resumenMensual: 'Resumen Mensual',
      totalGastos: 'Total Gastos',
      montoTotal: 'Monto Total',
      promedioDiario: 'Promedio Diario',
      categorias: 'Categorías',
      evolucion: 'Evolución de Gastos',
      gastosCategoria: 'Gastos por Categoría',
      desgloseCategoria: 'Desglose por Categoría',
      colCategoria: 'Categoría',
      colMonto: 'Monto',
      colPorcentaje: 'Porcentaje',
      loading: 'Generando reportes...'
    },
    transactions: {
      title: 'Transacciones',
      subtitle: 'Historial completo de gastos',
      searchPlaceholder: 'Buscar por categoría o descripción...',
      allCategories: 'Todas las categorías',
      monthPrev: 'Mes anterior',
      monthNext: 'Siguiente mes',
      export: 'Exportar',
      statsTotal: 'Total Transacciones',
      statsSpent: 'Total Gastado',
      statsAvg: 'Promedio',
      table: { date: 'Fecha', category: 'Categoría', description: 'Descripción', amount: 'Monto' },
      empty: 'No se encontraron transacciones',
    },
    settings: {
      title: 'Configuración',
      subtitle: 'Personaliza tu experiencia',
      saved: 'Guardada correctamente',
      limitsAndCurrency: 'Límites y Moneda',
      monthlyLimit: 'Límite de Gasto Mensual',
      monthlyLimitDesc: 'Recibirás alertas cuando te acerques a este límite',
      currency: 'Moneda',
      notifications: 'Notificaciones',
      limitNotifications: 'Notificaciones de Límite',
      limitNotificationsDesc: 'Recibe alertas al alcanzar el 80% del límite',
      appearance: 'Apariencia',
      darkMode: 'Modo Oscuro',
      darkModeDesc: 'Usa tema oscuro en la interfaz',
      language: 'Idioma',
      safeMode: 'Modo Seguro',
      safeModeDesc: 'Oculta montos y descripciones sensibles',
      dataBackup: 'Datos y Respaldo',
      autoBackup: 'Respaldo Automático',
      autoBackupDesc: 'Crea copias de seguridad diarias',
      exportData: 'Exportar Datos',
      importData: 'Importar Datos',
      saveChanges: 'Guardar Cambios',
    }
  },
  en: {
    menu: {
      dashboard: 'Dashboard',
      analytics: 'Analytics',
      transactions: 'Transactions',
      reports: 'Reports',
      settings: 'Settings',
      main: 'Main Menu',
      general: 'General',
    },
    dashboard: {
      title: 'Dashboard',
      subtitle: 'Expenses overview and stats',
      balanceTotal: 'Total Balance',
      gastosMes: 'This Month Spending',
      promedioDiario: 'Daily Average',
      totalGastos: 'Total Expenses',
      vsMesAnterior: 'vs last month',
      ultimos30: 'last 30 days',
      registrado: 'recorded',
      monthlyLimit: 'Monthly Spending Limit',
      used: 'used',
      limitExceeded: 'Limit exceeded!',
      closeToLimit: 'Close to limit',
      timeline: 'Spending Over Time',
      byCategory: 'Spending by Category',
      categories: 'Categories',
      loading: 'Loading dashboard...'
    },
    analytics: {
      title: 'Analytics',
      subtitle: 'Detailed analysis of your spending',
      trendGeneral: 'Overall Trend',
      vsPeriodoAnterior: 'vs previous period',
      categoriaPrincipal: 'Top Category',
      masFrecuente: 'most frequent',
      gastoTotal: 'Total Spent',
      ultimosNDias: (n) => `last ${n} days`,
      tendenciaTemporal: 'Temporal Trend',
      distribucionCategoria: 'Category Distribution',
      analisisCategoria: 'Category Analysis',
      resumenPeriodo: 'Period Summary',
      totalGastado: 'Total Spent',
      promedioDiario: 'Daily Average',
      diasConGastos: 'Days with Spending',
      categoriasActivas: 'Active Categories',
      loading: 'Loading analytics...'
    },
    components: {
      itemSingular: 'expense',
      itemPlural: 'expenses'
    },
    reports: {
      title: 'Reports',
      subtitle: 'Generate and download detailed reports',
      exportar: 'Export Reports',
      reportePdf: 'PDF Report',
      pdfDesc: 'Download a full PDF report',
      excel: 'Excel',
      excelDesc: 'Export data to Excel',
      csv: 'CSV',
      csvDesc: 'Export data as CSV',
      resumenMensual: 'Monthly Summary',
      totalGastos: 'Total Expenses',
      montoTotal: 'Total Amount',
      promedioDiario: 'Daily Average',
      categorias: 'Categories',
      evolucion: 'Spending Evolution',
      gastosCategoria: 'Spending by Category',
      desgloseCategoria: 'Category Breakdown',
      colCategoria: 'Category',
      colMonto: 'Amount',
      colPorcentaje: 'Percentage',
      loading: 'Generating reports...'
    },
    transactions: {
      title: 'Transactions',
      subtitle: 'Complete expense history',
      searchPlaceholder: 'Search by category or description...',
      allCategories: 'All categories',
      monthPrev: 'Previous month',
      monthNext: 'Next month',
      export: 'Export',
      statsTotal: 'Total Transactions',
      statsSpent: 'Total Spent',
      statsAvg: 'Average',
      table: { date: 'Date', category: 'Category', description: 'Description', amount: 'Amount' },
      empty: 'No transactions found',
    },
    settings: {
      title: 'Settings',
      subtitle: 'Customize your experience',
      saved: 'Saved successfully',
      limitsAndCurrency: 'Limits and Currency',
      monthlyLimit: 'Monthly Spending Limit',
      monthlyLimitDesc: 'You will receive alerts when you approach this limit',
      currency: 'Currency',
      notifications: 'Notifications',
      limitNotifications: 'Limit Notifications',
      limitNotificationsDesc: 'Receive alerts when reaching 80% of the limit',
      appearance: 'Appearance',
      darkMode: 'Dark Mode',
      darkModeDesc: 'Use dark theme in the interface',
      language: 'Language',
      safeMode: 'Safe Mode',
      safeModeDesc: 'Hide sensitive amounts and descriptions',
      dataBackup: 'Data & Backup',
      autoBackup: 'Automatic Backup',
      autoBackupDesc: 'Create daily backups',
      exportData: 'Export Data',
      importData: 'Import Data',
      saveChanges: 'Save Changes',
    }
  },
}

export function t(path) {
  const lang = getLanguage()
  const parts = path.split('.')
  let cur = dict[lang] || dict.es
  for (const p of parts) {
    cur = cur?.[p]
    if (cur == null) break
  }
  return cur || path
}
